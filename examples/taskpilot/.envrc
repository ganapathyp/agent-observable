# Automatically activate virtual environment when entering this directory
# Requires direnv: https://direnv.net/

# Check if .venv exists, if not create it
if [ ! -d .venv ]; then
    echo "âš ï¸  Virtual environment not found. Creating .venv..."
    if command -v uv &> /dev/null; then
        uv venv .venv
    else
        python3 -m venv .venv
    fi
fi

# Activate the virtual environment
source .venv/bin/activate

# Optional: Install dependencies if requirements.txt is newer than .venv/.installed
if [ ! -f .venv/.installed ] || [ requirements.txt -nt .venv/.installed ]; then
    echo "ğŸ“¦ Installing/updating dependencies..."
    pip install -q -r requirements.txt
    pip install -q -e .
    touch .venv/.installed
fi

# Show helpful info
echo "âœ… Virtual environment activated: $(python3 --version)"
echo "ğŸ“ Location: $(pwd)"
